<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Debug on 分享技术带来的喜悦</title>
    <link>http://localhost:1313/tags/debug/</link>
    <description>Recent content in Debug on 分享技术带来的喜悦</description>
    <generator>Hugo -- 0.156.0</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 27 Nov 2016 13:12:26 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/debug/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Dubbo服务telnet调试法</title>
      <link>http://localhost:1313/posts/2016-11-27-dubbo%E6%9C%8D%E5%8A%A1telnet%E8%B0%83%E8%AF%95%E6%B3%95/</link>
      <pubDate>Sun, 27 Nov 2016 13:12:26 +0000</pubDate>
      <guid>http://localhost:1313/posts/2016-11-27-dubbo%E6%9C%8D%E5%8A%A1telnet%E8%B0%83%E8%AF%95%E6%B3%95/</guid>
      <description>&lt;p&gt;公司的RPC的服务使用的是阿里巴巴的dubbo，老夫之前曾经写过一篇如何在测试环境&lt;a href=&#34;https://www.bridgeli.cn/archives/306&#34; title=&#34;Dubbo远程debug方法&#34;&gt;远程调试dubbo服务&lt;/a&gt;，详情请参考这篇，但一直对如何调试线上dubbo服务不得法，不得已每次都需要写一个web服务调一下看数据，前一段时间经新来的一个同事提示可以使用Telnet调试，网上搜了一下资料，发现真的很爽，以下是学习笔记。&lt;br&gt;
需要说明的是：Dubbo2.0.5以上版本服务提供端口支持telnet命令，不过应该没有公司使用2.0.5以下版本吧。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;进入调试模式&lt;/li&gt;
&lt;/ol&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
telnet localhost 20880
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;即：telnet + ip + 端口，这个不用解释，使用dubbo的肯定都知道&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;ls&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;使用上一个命令之后，敲一下回车，就进入dubbo的telnet调试服务了，然后就可以使用ls命令了，这个命令有几个用法：&lt;/p&gt;
&lt;p&gt;①. 显示服务列表&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ls
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;②. 显示服务详细信息列表&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ls -l
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;③. 显示服务的方法列表&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ls XxxService
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;④. 显示服务的方法详细信息列表&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ls -l XxxService
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;ps&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个命令主要是看连接信息，也有如下几个用法：&lt;/p&gt;
&lt;p&gt;①. 显示服务端口列表&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ps
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;②. 显示服务地址列表&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ps -l
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;③. 显示端口上的连接信息&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ps 20880
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;④, 显示端口上的连接详细信息&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
ps -l 20880
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;cd&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个缺省服务，主要有以下两个用法：&lt;/p&gt;
&lt;p&gt;①. 改变缺省服务，当设置了缺省服务，凡是需要输入服务名作为参数的命令，都可以省略服务参数&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
cd XxxService
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;②. 取消缺省服务&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
cd /
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;pwd&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;显示当前缺省服务&lt;/p&gt;
&lt;ol start=&#34;6&#34;&gt;
&lt;li&gt;trace&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个命令顾名思义：跟踪，具体有以下用法：&lt;/p&gt;
&lt;p&gt;①. 跟踪1次服务任意方法的调用情况&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
trace XxxService
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;②. 跟踪10次服务任意方法的调用情况&lt;/p&gt;</description>
    </item>
    <item>
      <title>Dubbo远程debug方法</title>
      <link>http://localhost:1313/posts/2016-08-14-dubbo%E8%BF%9C%E7%A8%8Bdebug%E6%96%B9%E6%B3%95/</link>
      <pubDate>Sun, 14 Aug 2016 21:28:15 +0000</pubDate>
      <guid>http://localhost:1313/posts/2016-08-14-dubbo%E8%BF%9C%E7%A8%8Bdebug%E6%96%B9%E6%B3%95/</guid>
      <description>&lt;p&gt;公司项目的rpc服务基于阿里巴巴的dubbo架构，开发dubbo项目的时候测试只能跑junit test，但实际工作中由于很多时候junit test写的不全，出了问题只能再加日志分析原因（典型的没事找事型），这次和公司移动端的推送联调IM服务，发现他们已经把老夫之前听说的远程debug用在了实际工作中，刚好趁此机会实验了一把，以下是笔记，以待自己和需要的朋友参考。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;dubbo服务的设置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我们自己观察dubbo的start.sh和start.bat这两个脚本会发现有如下两端代码&lt;/p&gt;
&lt;p&gt;①. start.sh&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
JAVA_DEBUG_OPTS=&amp;#34;&amp;#34;  
if [ &amp;#34;$1&amp;#34; = &amp;#34;debug&amp;#34; ]; then  
JAVA_DEBUG_OPTS=&amp;#34; -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n &amp;#34;  
fi
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;②. start.bat&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
if &amp;#34;&amp;#34;%1&amp;#34;&amp;#34; == &amp;#34;&amp;#34;debug&amp;#34;&amp;#34; goto debug  
if &amp;#34;&amp;#34;%1&amp;#34;&amp;#34; == &amp;#34;&amp;#34;jmx&amp;#34;&amp;#34; goto jmx

java -Xms64m -Xmx1024m -XX:MaxPermSize=64M -classpath ..\conf;%LIB_JARS% com.alibaba.dubbo.container.Main  
goto end

:debug  
java -Xms64m -Xmx1024m -XX:MaxPermSize=64M -Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n -classpath ..\conf;%LIB_JARS% com.alibaba.dubbo.container.Main  
goto end
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;也就是说，脚本已经支持远程debug，只需要的在启动的时候传入一个参数 debug 即可，其余的几乎不用做任何修改&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;eclipse的设置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;当我们把远程的服务以支持debug的模式启动之后，就需要把本地的项目也起来了，否则怎么debug呢，本地的设置其实非常简单，一张图搞定&lt;/p&gt;
&lt;img loading=&#34;lazy&#34; decoding=&#34;async&#34; src=&#34;https://www.bridgeli.cn/wp-content/uploads/2016/08/remote_debug-300x168.png&#34; alt=&#34;remote_debug-300x168&#34; width=&#34;300&#34; height=&#34;168&#34; class=&#34;alignnone size-full wp-image-307&#34; /&gt; 
&lt;p&gt;看了这张图，我相信不用我多说了，远程远程debug如此简单&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
