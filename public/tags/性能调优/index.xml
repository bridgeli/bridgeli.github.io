<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>性能调优 on 分享技术带来的喜悦</title>
    <link>http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/</link>
    <description>Recent content in 性能调优 on 分享技术带来的喜悦</description>
    <generator>Hugo -- 0.156.0</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 19 Mar 2017 13:36:26 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Java GC之常见监控与分析命令总结（上）</title>
      <link>http://localhost:1313/posts/2017-03-19-java-gc%E4%B9%8B%E5%B8%B8%E8%A7%81%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93%E4%B8%8A/</link>
      <pubDate>Sun, 19 Mar 2017 13:36:26 +0000</pubDate>
      <guid>http://localhost:1313/posts/2017-03-19-java-gc%E4%B9%8B%E5%B8%B8%E8%A7%81%E7%9B%91%E6%8E%A7%E4%B8%8E%E5%88%86%E6%9E%90%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93%E4%B8%8A/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://www.bridgeli.cn/archives/347&#34; title=&#34;Java GC之常见垃圾收集器参数总结&#34;&gt;上一篇文章&lt;/a&gt;简单写了几种常见的垃圾收集器的参数设置，设置参数的时候离不开对对系统进行监控和分析，所以总结一下监控和分析的常见命令。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;jps：JVM Process Status Tool，显示指定系统内所有的HotSpot虚拟机进程&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;命令格式：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
jps \[options\] \[hostid\]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;hostid为RMI注册表中注册的主机名，其他常用参数如下：&lt;br&gt;
-q：只输出LVMID，省略主类的名称&lt;br&gt;
-m：输出虚拟机进程启动的时候传递给主类main()方法的参数&lt;br&gt;
-l：输出主类的全名，如果进程执行的是jar包，输出jar路径&lt;br&gt;
-v：输出虚拟机进程启动时JVM参数&lt;/p&gt;
&lt;p&gt;命令执行样例：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
jps -l
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;jstat：JVM Statistics Monitoring Tool，用于收集Hotspot虚拟机各方面的运行数据&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;命令格式：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
jstat \[option vmid [interval[s|ms\] \[count\]]]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;对于命令格式中的VMID和LVMID，如过是本地虚拟机进程，VMID和LVMID是一致的，如果是远程虚拟机，那VMID的格式应当是：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
\[protocol:\] \[//\] lvmid[@hostname[:port]/servername]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;interval和count代表查询的间隔和次数，如果省略这两个参数，说明只查一次，其他常用参数：&lt;/p&gt;
&lt;p&gt;-class：监视装载类、卸载类、总空间以及类装载所耗费的时间&lt;br&gt;
-gc：监视java堆状况，包括eden区、两个survivor区、老年代、永久代等的容量、已用空间、GC时间合计信息&lt;br&gt;
-gccapacity：监视内容与-gc基本相同，但输出主要关注java堆各个区域使用到最大、最小空间&lt;br&gt;
-gcutil：监视内容与-gc基本相同，但输出主要关注已使用控件占总空间的百分比&lt;br&gt;
-gccause：与-gcutil功能一样，但是会额外输出导致上一次gc产生的原因&lt;br&gt;
-gcnew：监视新生代GC情况&lt;br&gt;
-gcnewcapacity：监视内容与-gcnew基本相同，输出主要关注使用到的最大、最小空间&lt;br&gt;
-gcold：监视老年代GC情况&lt;br&gt;
-gcoldcapacity：监视内容与-gcold基本相同，输出主要关注使用到的最大、最小空间&lt;br&gt;
-gcpermcapacity：输出永久代使用到的最大、最小空间&lt;br&gt;
-compiler：输出JIT编译过的方法、耗时等信息&lt;br&gt;
-printcompilation：输出已经被JIT编译过的方法&lt;/p&gt;
&lt;p&gt;命令执行样例：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
jstat -gcutil 2764 1000
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;jinfo：Configuration Info for Java，显示虚拟机的配置信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;使用jps命令的-v参数可以查看虚拟机启动时显示指定的参数列表，但如果想知道未被显式指定的参数的系统默认值，除了去找资料以外，就得使用jinfo的-flag选项，命令格式：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
jinfo [option] pid
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;执行样例：查询CMSInitiatingOccupancyFraction参数值&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
jinfo -flag CMSInitiatingOccupancyFraction 2764
&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;jmap：Memory Map for Java，生成虚拟机的内存转储快照（heapdump文件）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;命令格式：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
