<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>数据库 | 分享技术带来的喜悦</title>
<meta name="keywords" content="">
<meta name="description" content="技术分享博客">
<meta name="author" content="Bridge Li">
<link rel="canonical" href="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a29c24210eb31d9ce56f669c66a35c9c51b17376b7764e336a49af7dec914cf0.css" integrity="sha256-opwkIQ6zHZzlb2acZqNcnFGxc3a3dk4zakmvfeyRTPA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/index.xml" title="rss">
<link rel="alternate" hreflang="en" href="http://localhost:1313/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body class="list" id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="分享技术带来的喜悦 (Alt + H)">分享技术带来的喜悦</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/tags/">Tags</a></div>
  <h1>
    数据库
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">MySQL : The last packet successfully received from the server was XXX milliseconds ago
    </h2>
  </header>
  <div class="entry-content">
    <p>14年毕业写完论文没事干的时候，自己玩微信公众号开发，当时想做一个自然语言交互，其实就是想试一下lucene，但是当时建索引的时候偶尔会报这个错，一致不知道具体原因，去网上搜索但是天下文章一大抄，你抄我来我抄他，也没找到原因，后来因为工作中也没遇到过，感觉应该是自己当时水平不行就忘了这件事，前几天 fatsjson 和 druid 的作者温少突然在一个群里面说有人通过阿里工单反馈这个问题，他给追踪了一下，找到了原因，原来还是还是有人遇到这个问题，今天记录一下，希望对遇到这个问题的小伙伴有帮助，报错的信息大概就是：
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 20,820,001 milliseconds ago. The last packet sent successfully to the server was 20,820,002 milliseconds ago. is longer than the server configured value of &amp;#8216;wait_timeout&amp;#8217;. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property &amp;#8216;autoReconnect=true&amp;#8217; to avoid this problem. at sun.reflect.GeneratedConstructorAccessor29.newInstance(Unknown Source) ………… 下面是温少分享的截图
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-11-11 08:08:13 +0000 +0000'>November 11, 2017</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>88 words</span>&nbsp;·&nbsp;<span>Bridge Li</span></footer>
  <a class="entry-link" aria-label="post link to MySQL : The last packet successfully received from the server was XXX milliseconds ago" href="http://localhost:1313/posts/2017-11-11-mysql-the-last-packet-successfully-received-from-the-server-was-xxx-milliseconds-ago/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">事务并发处理
    </h2>
  </header>
  <div class="entry-content">
    <p>前几天和同事讨论，老夫自以为对事务有了一定的了解，但当讨论的时候发现还是有些说不明白，所以周末的时间，又看了一遍带我入门北京尚学堂马士兵老师关于事务的讲解，这次做一下笔记，以供以后忘了的时候查询方便。这里默认读者对事务的ACID都有了了解，直接说事务并发时可能出现的问题和数据库的事务隔离级别
事务并发时可能出现的问题 说这个问题记得大学课堂上有一个很经典的例子就是：银行的存取款，这里也用这个例子说明（因为不知道wp博客怎么搞表格和怎么支持MD，所以就搞几张图片吧）
①. 第一类丢失更新(Lost Update)
②. dirty read脏读(读到了另一个事务在处理中还未提交的数据)
③. non-repeatable read 不可重复读
④. second lost update problem 第二类丢失更新(不可重复读的特殊情况)
⑤. phantom read 幻读
看到这里可能会有读者对不可重复读和幻读有所迷惑，这两者有什么区别吗？不都是受另一个事务的影响，导致前后结果不一致吗？其实仔细看区别还是很明显的：幻读是关于数据库的delete和insert导致前后的数据不一致，而其他的情况都是数据的更新导致前后的数据不一致
数据库的事务隔离机制 其中在文档java.sql.Connection中有详细的说明，除了none（没有事务）之外，还有：1:read-uncommitted 2:read-committed 4:repeatable read 8:serializable（数字代表对应值）四种。
为什么取值要使用 1 2 4 8 而不是 1 2 3 4
1=0000 2=0010 4=0100 8=1000(位移计算效率高)
需要说明的是：
只要数据库支持事务，就不可能出现第一类丢失更新
read-uncommitted(允许读取未提交的数据) 会出现dirty read, phantom-read, non-repeatable read 问题
read-commited(读取已提交的数据 项目中一般都使用这个)不会出现dirty read，因为只有另一个事务提交才会读出来结果，但仍然会出现 non-repeatable read 和 phantom-read；使用read-commited机制可用悲观锁 乐观锁来解决non-repeatable read 和 phantom-read问题
repeatable read(事务执行中其他事务无法执行修改或插入操作 较安全)但仍然会出现phantom-read
serializable解决一切问题(顺序执行事务 不并发，实际中很少用)
...</p>
  </div>
  <footer class="entry-footer"><span title='2017-04-09 12:28:35 +0000 +0000'>April 9, 2017</span>&nbsp;·&nbsp;<span>1 min</span>&nbsp;·&nbsp;<span>74 words</span>&nbsp;·&nbsp;<span>Bridge Li</span></footer>
  <a class="entry-link" aria-label="post link to 事务并发处理" href="http://localhost:1313/posts/2017-04-09-%E4%BA%8B%E5%8A%A1%E5%B9%B6%E5%8F%91%E5%A4%84%E7%90%86/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Spring aop应用之实现数据库读写分离
    </h2>
  </header>
  <div class="entry-content">
    <p>去年五月份的时候曾经写过一篇：Spring加Mybatis实现MySQL数据库主从读写分离，实现的原理是配置了多套数据源，相应的sqlsessionfactory，transactionmanager和事务代理各配置了一套，如果从库或数据库有多个的时候，需要配置的信息会越来越多，远远不够优雅，在我们编程界有一个规范：约定优于配置。所以就用Sping的aop实现了一个简单的数据库分离方案，具体实现代码放在了Github上，地址如下：
https://github.com/bridgeli/practical-util/tree/master/src/main/java/cn/bridgeli/datasource 读者如果想使用再简单的方法就是把这个代码download下来，放到自己的项目里面，当然更优雅的方式是：打成jar包，放到项目里面了，具体打jar的方法，老夫就不在这里多说了，相信看这篇文章的读者肯定都会了。当然仅仅有这份代码，他们是不会自动生效的，既然是使用Spring的Aop实现数据库读写分离，所以肯定会有牵涉到Aop的配置了，所以在spring-mybatis.xml中有如下配置：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:aop=&#34;http://www.springframework.org/schema/aop&#34; xmlns:context=&#34;http://www.springframework.org/schema/context&#34; xmlns:p=&#34;http://www.springframework.org/schema/p&#34; xmlns:tx=&#34;http://www.springframework.org/schema/tx&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34; http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd&#34;&gt; &lt;!&amp;#8211; 配置写数据源 &amp;#8211;&gt; &lt;bean id=&#34;masterDataSource&#34; class=&#34;com.alibaba.druid.pool.DruidDataSource&#34; destroy-method=&#34;close&#34;&gt; &lt;property name=&#34;driverClassName&#34; value=&#34;${bridgeli.jdbc.driver}&#34; /&gt; &lt;property name=&#34;url&#34; value=&#34;${bridgeli.jdbc.url}&#34; /&gt; &lt;property name=&#34;username&#34; value=&#34;${bridgeli.jdbc.username}&#34; /&gt; &lt;property name=&#34;password&#34; value=&#34;${bridgeli.jdbc.password}&#34; /&gt; &lt;property name=&#34;validationQuery&#34; value=&#34;${bridgeli.jdbc.validationQuery}&#34; /&gt; &lt;property name=&#34;initialSize&#34; value=&#34;1&#34; /&gt; &lt;property name=&#34;maxActive&#34; value=&#34;20&#34; /&gt; &lt;property name=&#34;minIdle&#34; value=&#34;0&#34; /&gt; &lt;property name=&#34;maxWait&#34; value=&#34;60000&#34; /&gt; &lt;property name=&#34;testOnBorrow&#34; value=&#34;false&#34; /&gt; &lt;property name=&#34;testOnReturn&#34; value=&#34;false&#34; /&gt; &lt;property name=&#34;testWhileIdle&#34; value=&#34;true&#34; /&gt; &lt;property name=&#34;timeBetweenEvictionRunsMillis&#34; value=&#34;60000&#34; /&gt; &lt;property name=&#34;minEvictableIdleTimeMillis&#34; value=&#34;25200000&#34; /&gt; &lt;property name=&#34;removeAbandoned&#34; value=&#34;true&#34; /&gt; &lt;property name=&#34;removeAbandonedTimeout&#34; value=&#34;1800&#34; /&gt; &lt;property name=&#34;logAbandoned&#34; value=&#34;true&#34; /&gt; &lt;property name=&#34;filters&#34; value=&#34;stat&#34; /&gt; &lt;/bean&gt; &lt;!&amp;#8211; 配置读数据源 &amp;#8211;&gt; &lt;bean id=&#34;parentSlaveDataSource&#34; class=&#34;com.alibaba.druid.pool.DruidDataSource&#34; destroy-method=&#34;close&#34;&gt; &lt;property name=&#34;driverClassName&#34; value=&#34;${bridgeli.jdbc.driver}&#34; /&gt; &lt;property name=&#34;validationQuery&#34; value=&#34;${bridgeli.jdbc.validationQuery}&#34; /&gt; &lt;property name=&#34;initialSize&#34; value=&#34;1&#34; /&gt; &lt;property name=&#34;maxActive&#34; value=&#34;20&#34; /&gt; &lt;property name=&#34;minIdle&#34; value=&#34;0&#34; /&gt; &lt;property name=&#34;maxWait&#34; value=&#34;60000&#34; /&gt; &lt;property name=&#34;testOnBorrow&#34; value=&#34;false&#34; /&gt; &lt;property name=&#34;testOnReturn&#34; value=&#34;false&#34; /&gt; &lt;property name=&#34;testWhileIdle&#34; value=&#34;true&#34; /&gt; &lt;property name=&#34;timeBetweenEvictionRunsMillis&#34; value=&#34;60000&#34; /&gt; &lt;property name=&#34;minEvictableIdleTimeMillis&#34; value=&#34;25200000&#34; /&gt; &lt;property name=&#34;removeAbandoned&#34; value=&#34;true&#34; /&gt; &lt;property name=&#34;removeAbandonedTimeout&#34; value=&#34;1800&#34; /&gt; &lt;property name=&#34;logAbandoned&#34; value=&#34;true&#34; /&gt; &lt;property name=&#34;filters&#34; value=&#34;stat&#34; /&gt; &lt;/bean&gt; &lt;bean id=&#34;slaveDataSource1&#34; class=&#34;com.alibaba.druid.pool.DruidDataSource&#34; destroy-method=&#34;close&#34; parent=&#34;parentSlaveDataSource&#34;&gt; &lt;property name=&#34;url&#34; value=&#34;${bridgeli_slave1.jdbc.url}&#34; /&gt; &lt;property name=&#34;username&#34; value=&#34;${bridgeli_slave1.jdbc.username}&#34; /&gt; &lt;property name=&#34;password&#34; value=&#34;${bridgeli_slave1.jdbc.password}&#34; /&gt; &lt;/bean&gt; &lt;bean id=&#34;dataSource&#34; class=&#34;cn.bridgeli.datasource.MasterSlaveDataSource&#34;&gt; &lt;property name=&#34;targetDataSources&#34;&gt; &lt;map&gt; &lt;entry key-ref=&#34;masterDataSource&#34; value-ref=&#34;masterDataSource&#34;/&gt; &lt;entry key-ref=&#34;slaveDataSource1&#34; value-ref=&#34;slaveDataSource1&#34;/&gt; &lt;/map&gt; &lt;/property&gt; &lt;property name=&#34;defaultTargetDataSource&#34; ref=&#34;masterDataSource&#34;/&gt; &lt;property name=&#34;masterSlaveSelector&#34; ref=&#34;dataSelector&#34;/&gt; &lt;/bean&gt; &lt;bean id=&#34;dataSelector&#34; class=&#34;cn.bridgeli.datasource.MasterSlaveSelectorByPoll&#34;&gt; &lt;property name=&#34;masters&#34;&gt; &lt;list&gt; &lt;ref bean=&#34;masterDataSource&#34;/&gt; &lt;/list&gt; &lt;/property&gt; &lt;property name=&#34;slaves&#34;&gt; &lt;list&gt; &lt;ref bean=&#34;slaveDataSource1&#34;/&gt; &lt;/list&gt; &lt;/property&gt; &lt;property name=&#34;defaultDataSource&#34; ref=&#34;masterDataSource&#34;/&gt; &lt;/bean&gt; &lt;aop:aspectj-autoproxy/&gt; &lt;!&amp;#8211; mybaits 数据工厂 &amp;#8211;&gt; &lt;bean id=&#34;sqlSessionFactory&#34; class=&#34;org.mybatis.spring.SqlSessionFactoryBean&#34;&gt; &lt;property name=&#34;dataSource&#34; ref=&#34;dataSource&#34; /&gt; &lt;/bean&gt; &lt;!&amp;#8211; 自动扫描所有注解的路径 &amp;#8211;&gt; &lt;bean class=&#34;org.mybatis.spring.mapper.MapperScannerConfigurer&#34;&gt; &lt;property name=&#34;basePackage&#34; value=&#34;cn.bridgeli.mapper&#34; /&gt; &lt;!&amp;#8211; &lt;property name=&#34;sqlSessionFactory&#34; ref=&#34;sqlSessionFactory&#34; /&gt; &amp;#8211;&gt; &lt;property name=&#34;sqlSessionFactoryBeanName&#34; value=&#34;sqlSessionFactory&#34;&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!&amp;#8211; 数据库切面 &amp;#8211;&gt; &lt;bean id=&#34;masterSlaveAspect&#34; class=&#34;cn.bridgeli.datasource.MasterSlaveAspect&#34;&gt; &lt;property name=&#34;prefixMasters&#34;&gt; &lt;list&gt; &lt;value&gt;save&lt;/value&gt; &lt;value&gt;update&lt;/value&gt; &lt;value&gt;delete&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;aop:config&gt; &lt;aop:aspect id=&#34;c&#34; ref=&#34;masterSlaveAspect&#34;&gt; &lt;aop:pointcut id=&#34;tx&#34; expression=&#34;execution(\* cn.bridgeli.service..\*.*(..))&#34;/&gt; &lt;aop:before pointcut-ref=&#34;tx&#34; method=&#34;before&#34;/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt; &lt;context:annotation-config /&gt; &lt;context:component-scan base-package=&#34;cn.bridgeli&#34; /&gt; &lt;/beans&gt; 这样我们就很优雅的利用Spring的Aop实现了对数据库的读写分离，读的时候走slaveDataSource1这个数据源，写的时候走masterDataSource这个数据源。哎，等等，这里哪里体现了约定优于配置这一规范，他们怎么知道哪些方法走读库哪些走写库？同学你别急，仔细读读这个配置文件，你就会发现在第98行，配置了一个MasterSlaveAspect，也就是说代码里面service层（为什么是service层？）的方法以这里面配置的这些关键字打头，都将会走写库，所以当我们想让一个方法走主库的时候，必须在这个地方添加该方法的前缀或者用这里面已有的前缀，这就要求我们必须约定好走主库的方法的打头，即约定优于配置。
</p>
  </div>
  <footer class="entry-footer"><span title='2016-12-31 12:12:51 +0000 +0000'>December 31, 2016</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span>297 words</span>&nbsp;·&nbsp;<span>Bridge Li</span></footer>
  <a class="entry-link" aria-label="post link to Spring aop应用之实现数据库读写分离" href="http://localhost:1313/posts/2016-12-31-spring-aop%E5%BA%94%E7%94%A8%E4%B9%8B%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">分享技术带来的喜悦</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
