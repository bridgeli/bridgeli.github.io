<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Spring Aop on 分享技术带来的喜悦</title>
    <link>http://localhost:1313/tags/spring-aop/</link>
    <description>Recent content in Spring Aop on 分享技术带来的喜悦</description>
    <generator>Hugo -- 0.156.0</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 25 Nov 2018 11:48:23 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/spring-aop/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>使用 Spring AOP 注意事项</title>
      <link>http://localhost:1313/posts/2018-11-25-%E4%BD%BF%E7%94%A8-spring-aop-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</link>
      <pubDate>Sun, 25 Nov 2018 11:48:23 +0000</pubDate>
      <guid>http://localhost:1313/posts/2018-11-25-%E4%BD%BF%E7%94%A8-spring-aop-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</guid>
      <description>&lt;p&gt;说实话，由于我个人某些基础不是很牢固，所以前一段时间关于 Spring Aop 踩了一个坑，其实很简单，今天就记录一下，先说结论：&lt;/p&gt;
&lt;p&gt;不能被 Spring AOP 增强的方法：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;基于接口的动态代理：除 public 外的其它所有的方法，此外 public static 也不能被增强&lt;/li&gt;
&lt;li&gt;基于 CGLib 的动态代理：private、static、final 的方法，也就是只有 public 和 protected 可以，但是要注意切入点语法的配置&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;测试用例如下，pom 文件：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
&amp;lt;dependency&amp;gt;  
&amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;  
&amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;  
&amp;lt;version&amp;gt;1.7.7&amp;lt;/version&amp;gt;  
&amp;lt;/dependency&amp;gt;  
&amp;lt;dependency&amp;gt;  
&amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;  
&amp;lt;artifactId&amp;gt;spring-context&amp;lt;/artifactId&amp;gt;  
&amp;lt;version&amp;gt;4.3.11.RELEASE&amp;lt;/version&amp;gt;  
&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;  
&amp;lt;/dependency&amp;gt;  
&amp;lt;dependency&amp;gt;  
&amp;lt;groupId&amp;gt;org.aspectj&amp;lt;/groupId&amp;gt;  
&amp;lt;artifactId&amp;gt;aspectjweaver&amp;lt;/artifactId&amp;gt;  
&amp;lt;version&amp;gt;1.8.10&amp;lt;/version&amp;gt;  
&amp;lt;/dependency&amp;gt;  
&amp;lt;dependency&amp;gt;  
&amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;  
&amp;lt;artifactId&amp;gt;spring-context&amp;lt;/artifactId&amp;gt;  
&amp;lt;version&amp;gt;4.3.11.RELEASE&amp;lt;/version&amp;gt;  
&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;配置文件就比较简单了：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;  
&amp;lt;beans xmlns=&amp;#34;http://www.springframework.org/schema/beans&amp;#34;  
xmlns:xsi=&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;  
xmlns:context=&amp;#34;http://www.springframework.org/schema/context&amp;#34;  
xmlns:aop=&amp;#34;http://www.springframework.org/schema/aop&amp;#34;  
xsi:schemaLocation=&amp;#34;http://www.springframework.org/schema/beans  
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd  
http://www.springframework.org/schema/context  
http://www.springframework.org/schema/context/spring-context-2.5.xsd  
http://www.springframework.org/schema/aop  
http://www.springframework.org/schema/aop/spring-aop-2.5.xsd&amp;#34;&amp;gt;  
&amp;lt;context:annotation-config/&amp;gt;  
&amp;lt;context:component-scan base-package=&amp;#34;cn.bridgeli&amp;#34;/&amp;gt;  
&amp;lt;aop:aspectj-autoproxy/&amp;gt;

&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;切面类：&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
package cn.bridgeli.demo.aop;

import org.aspectj.lang.ProceedingJoinPoint;  
import org.aspectj.lang.annotation.Around;  
import org.aspectj.lang.annotation.Aspect;  
import org.aspectj.lang.annotation.Before;  
import org.aspectj.lang.annotation.Pointcut;  
import org.springframework.stereotype.Component;

@Aspect  
@Component  
public class LogInterceptor {  
// @Pointcut(&amp;#34;execution(\* \* com.bjsxt.service..*.add(..))&amp;#34;)  
@Pointcut(&amp;#34;execution(\* cn.bridgeli.demo.service..\*.*(..))&amp;#34;)  
public void myMethod() {  
}

@Before(&amp;#34;myMethod()&amp;#34;)  
public void before() {  
System.out.println(&amp;#34;method before&amp;#34;);  
}

@Around(&amp;#34;myMethod()&amp;#34;)  
public void aroundMethod(ProceedingJoinPoint pjp) throws Throwable {  
System.out.println(&amp;#34;method around start&amp;#34;);  
pjp.proceed();  
System.out.println(&amp;#34;method around end&amp;#34;);  
}

}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;测试类：&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
