<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>抢红包 on 分享技术带来的喜悦</title>
    <link>http://localhost:1313/tags/%E6%8A%A2%E7%BA%A2%E5%8C%85/</link>
    <description>Recent content in 抢红包 on 分享技术带来的喜悦</description>
    <generator>Hugo -- 0.156.0</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 25 Feb 2015 09:24:43 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/%E6%8A%A2%E7%BA%A2%E5%8C%85/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>别人抢红包，程序猿来探讨微信红包的算法实现</title>
      <link>http://localhost:1313/posts/2015-02-25-%E5%88%AB%E4%BA%BA%E6%8A%A2%E7%BA%A2%E5%8C%85%E7%A8%8B%E5%BA%8F%E7%8C%BF%E6%9D%A5%E6%8E%A2%E8%AE%A8%E5%BE%AE%E4%BF%A1%E7%BA%A2%E5%8C%85%E7%9A%84%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/</link>
      <pubDate>Wed, 25 Feb 2015 09:24:43 +0000</pubDate>
      <guid>http://localhost:1313/posts/2015-02-25-%E5%88%AB%E4%BA%BA%E6%8A%A2%E7%BA%A2%E5%8C%85%E7%A8%8B%E5%BA%8F%E7%8C%BF%E6%9D%A5%E6%8E%A2%E8%AE%A8%E5%BE%AE%E4%BF%A1%E7%BA%A2%E5%8C%85%E7%9A%84%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/</guid>
      <description>&lt;p&gt;曾经在公司写过一个类似于微信抢红包的功能，当时由于不会写，各种纠结，虽然最终实现了功能，但也仅仅是实现功能而已，像腾讯这么牛的公司肯定不是那样的，那么腾讯是怎么实现的呢？一直很好奇，但一直不得要领，今天偶然发现一篇文章，作者用很简单的算法，算是比较完美的解决了这个问题，说是完美，因为该算法满足了：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1、每个人都要能够领取到红包；&lt;br&gt;
2、每个人领取到的红包金额总和=总金额；&lt;br&gt;
3、每个人领取到的红包金额不等，但也不能差的太离谱，不然就没趣味；&lt;br&gt;
4、算法一定要简单，不然对不起腾讯这个招牌；&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;但由于原文是Python写的（老夫的推测，因为老夫并不会Python，本文底部注有链接，感兴趣的可以看看），老夫改为由Java实现，当然介于水平，实现的可能并不好，写在这里算是抛砖引玉，如果有牛人写出来更好的，欢迎留言交流&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;package cn.bridgeli.hongbao;

public class HongBao {
    public static void fenPei(double totalMoney, int totalPerson) {
        double min = 0.01;
        for (int i = 1; i &amp;lt; totalPerson; i++) {
// 随机安全上限，同时扩大 100 倍  
            double safeTotal = ((totalMoney &amp;amp;#8211; (totalPerson &amp;amp;#8211; i) \* min) / (totalPerson &amp;amp;#8211; i)) \* 100;
// 生成随机钱数  
            double money = Math.floor(Math.random() * safeTotal + 1.0) / 100;
            totalMoney -= money;
            System.out.println(&amp;#34;第&amp;#34; + i + &amp;#34;个红包：&amp;#34; + money + &amp;#34; 元&amp;#34;);
        }
        System.out.println(&amp;#34;第&amp;#34; + totalPerson + &amp;#34;个红包：&amp;#34; + roundDouble(totalMoney) + &amp;#34; 元&amp;#34;);
    }

    // 四舍五入  
    private static Double roundDouble(double val) {
        Double ret = null;
        try {
// 2 表示保留两位小数  
            double factor = Math.pow(10, 2);
            ret = Math.floor(val * factor + 0.5) / factor;
        } catch (Exception e) {
            e.printStackTrace();
        }

        return ret;
    }

}  
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;参考资料：http://mp.weixin.qq.com/s?__biz=MjM5OTA1MDUyMA==&amp;amp;mid=204349860&amp;amp;idx=2&amp;amp;sn=0a3433ff34c08dca5c47f7d97301e118#rd&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
