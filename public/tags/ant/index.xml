<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>ANT on 分享技术带来的喜悦</title>
    <link>http://localhost:1313/tags/ant/</link>
    <description>Recent content in ANT on 分享技术带来的喜悦</description>
    <generator>Hugo -- 0.156.0</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 10 May 2015 14:56:18 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/ant/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ANT（build）脚本模板示例</title>
      <link>http://localhost:1313/posts/2015-05-10-antbuild%E6%A8%A1%E6%9D%BF%E7%A4%BA%E4%BE%8B/</link>
      <pubDate>Sun, 10 May 2015 14:56:18 +0000</pubDate>
      <guid>http://localhost:1313/posts/2015-05-10-antbuild%E6%A8%A1%E6%9D%BF%E7%A4%BA%E4%BE%8B/</guid>
      <description>&lt;p&gt;近来虽然Maven构建的项目越来越盛行，但是依然还有很多遗留（暂且称之为遗留吧）项目依然是由ANT编译的，今天老夫就整理一下自己目前公司项目用到的ANT模板，既作为老夫的学习笔记，以供将来查看，也分享出来供需要的参考，因为比较简单易懂，就不多说了，直接上代码&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;  
&amp;lt;!&amp;amp;#8211;  
Ant工程build模板  
ant build file

Example: ant -Dprofile=dev deploy  
test IDC测试环境  
dev 本地开发环境 (default)  
&amp;amp;#8211;&amp;gt;  
&amp;lt;project name=&amp;#34;antProject&amp;#34; basedir=&amp;#34;.&amp;#34; default=&amp;#34;prompt&amp;#34;&amp;gt;

&amp;lt;property name=&amp;#34;javac.version&amp;#34; value=&amp;#34;1.6&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;project.name&amp;#34; value=&amp;#34;projectname&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;source.encoding&amp;#34; value=&amp;#34;UTF-8&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;deploy.dir&amp;#34; value=&amp;#34;/tmp/${project.name}&amp;#34; /&amp;gt;

&amp;lt;!&amp;amp;#8211; project var set &amp;amp;#8211;&amp;gt;  
&amp;lt;property name=&amp;#34;target.path&amp;#34; value=&amp;#34;build&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;target.root.path&amp;#34; value=&amp;#34;${target.path}/ROOT&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;target.root.classes&amp;#34; value=&amp;#34;${target.root.path}/WEB-INF/classes&amp;#34; /&amp;gt;

&amp;lt;property name=&amp;#34;webroot.path&amp;#34; value=&amp;#34;WebRoot&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;compileSrc&amp;#34; value=&amp;#34;src&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;compileDest&amp;#34; value=&amp;#34;${target.root.classes}&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;env.dir&amp;#34; value=&amp;#34;env&amp;#34; /&amp;gt;  
&amp;lt;property name=&amp;#34;env.cfg&amp;#34; value=&amp;#34;${env.dir}/${profile}&amp;#34; /&amp;gt;  
&amp;lt;tstamp&amp;gt;  
&amp;lt;format property=&amp;#34;now&amp;#34; pattern=&amp;#34;yyyyMMddHHmmss&amp;#34; /&amp;gt;  
&amp;lt;/tstamp&amp;gt;  
&amp;lt;path id=&amp;#34;compileClassPath&amp;#34;&amp;gt;  
&amp;lt;fileset dir=&amp;#34;${webroot.path}/WEB-INF/lib&amp;#34;&amp;gt;  
&amp;lt;include name=&amp;#34;*.jar&amp;#34; /&amp;gt;  
&amp;lt;/fileset&amp;gt;  
&amp;lt;/path&amp;gt;  
&amp;lt;target name=&amp;#34;prompt&amp;#34; description=&amp;#34;show prompt information&amp;#34;&amp;gt;  
&amp;lt;echo&amp;gt;Please choose task: clean, compile, war, deploy. ${line.separator}  
Example: ${line.separator}  
ant compile ${line.separator}  
ant -Dprofile=test deploy  
&amp;lt;/echo&amp;gt;  
&amp;lt;/target&amp;gt;  
&amp;lt;target name=&amp;#34;clean&amp;#34;&amp;gt;  
&amp;lt;delete dir=&amp;#34;${target.path}&amp;#34; /&amp;gt;  
&amp;lt;mkdir dir=&amp;#34;${target.path}&amp;#34; /&amp;gt;  
&amp;lt;delete dir=&amp;#34;${compileDest}&amp;#34; /&amp;gt;  
&amp;lt;mkdir dir=&amp;#34;${compileDest}&amp;#34; /&amp;gt;  
&amp;lt;delete dir=&amp;#34;${target.root.classes}&amp;#34; /&amp;gt;  
&amp;lt;mkdir dir=&amp;#34;${target.root.classes}&amp;#34; /&amp;gt;  
&amp;lt;echo&amp;gt;cleaned for ${compileDest}, ${target.root.path},${target.path}/*.war&amp;lt;/echo&amp;gt;  
&amp;lt;/target&amp;gt;

&amp;lt;target name=&amp;#34;compile&amp;#34; depends=&amp;#34;clean,testIfProfileSet&amp;#34;&amp;gt;  
&amp;lt;echo&amp;gt;starting compile the source from ${compileSrc}&amp;lt;/echo&amp;gt;  
&amp;lt;javac srcdir=&amp;#34;${compileSrc}&amp;#34; includeantruntime=&amp;#34;false&amp;#34; fork=&amp;#34;true&amp;#34;  
memoryinitialsize=&amp;#34;256m&amp;#34; memorymaximumsize=&amp;#34;512m&amp;#34; destdir=&amp;#34;${compileDest}&amp;#34;  
classpathref=&amp;#34;compileClassPath&amp;#34; encoding=&amp;#34;${source.encoding}&amp;#34;  
source=&amp;#34;${javac.version}&amp;#34; target=&amp;#34;${javac.version}&amp;#34;  
debug=&amp;#34;true&amp;#34; verbose=&amp;#34;false&amp;#34; optimize=&amp;#34;true&amp;#34; deprecation=&amp;#34;false&amp;#34;&amp;gt;  
&amp;lt;/javac&amp;gt;  
&amp;lt;copy todir=&amp;#34;${compileDest}&amp;#34;&amp;gt;  
&amp;lt;fileset dir=&amp;#34;${compileSrc}&amp;#34; excludes=&amp;#34;*\*/\*.svn,*\*/\*.java&amp;#34; /&amp;gt;  
&amp;lt;/copy&amp;gt;  
&amp;lt;echo&amp;gt;compiled classes copied to ${compileDest}&amp;lt;/echo&amp;gt;  
&amp;lt;copy todir=&amp;#34;${target.root.path}&amp;#34;&amp;gt;  
&amp;lt;fileset dir=&amp;#34;${webroot.path}&amp;#34; excludes=&amp;#34;*\*/\*.svn,*\*/\*.java&amp;#34; /&amp;gt;  
&amp;lt;/copy&amp;gt;  
&amp;lt;echo&amp;gt;copied to ${webroot.path} to ${compileDest}&amp;lt;/echo&amp;gt;  
&amp;lt;echo&amp;gt;compile finished&amp;lt;/echo&amp;gt;  
&amp;lt;/target&amp;gt;  
&amp;lt;target name=&amp;#34;testIfProfileSet&amp;#34;&amp;gt;  
&amp;lt;echo&amp;gt;ant param profile: ${profile}&amp;lt;/echo&amp;gt;  
&amp;lt;condition property=&amp;#34;isProfileSet&amp;#34;&amp;gt;  
&amp;lt;!&amp;amp;#8211; &amp;lt;isset property=&amp;#34;${profile}&amp;#34; /&amp;gt; &amp;amp;#8211;&amp;gt;  
&amp;lt;or&amp;gt;  
&amp;lt;equals arg1=&amp;#34;${profile}&amp;#34; arg2=&amp;#34;dev&amp;#34; /&amp;gt;  
&amp;lt;equals arg1=&amp;#34;${profile}&amp;#34; arg2=&amp;#34;test&amp;#34; /&amp;gt;

&amp;lt;/or&amp;gt;  
&amp;lt;/condition&amp;gt;  
&amp;lt;antcall target=&amp;#34;profileProvided&amp;#34;&amp;gt;  
&amp;lt;/antcall&amp;gt;  
&amp;lt;antcall target=&amp;#34;noProfile&amp;#34;&amp;gt;  
&amp;lt;/antcall&amp;gt;  
&amp;lt;/target&amp;gt;

&amp;lt;target name=&amp;#34;profileProvided&amp;#34; if=&amp;#34;isProfileSet&amp;#34;&amp;gt;  
&amp;lt;copy todir=&amp;#34;${target.root.classes}&amp;#34;&amp;gt;  
&amp;lt;fileset dir=&amp;#34;${env.cfg}&amp;#34; /&amp;gt;  
&amp;lt;/copy&amp;gt;  
&amp;lt;echo&amp;gt;copied config files ${env.cfg} to ${target.root.classes}&amp;lt;/echo&amp;gt;  
&amp;lt;/target&amp;gt;  
&amp;lt;target name=&amp;#34;noProfile&amp;#34; if=&amp;#34;isProfileSet&amp;#34;&amp;gt;  
&amp;lt;echo&amp;gt;ant param profile is none, use default config files&amp;lt;/echo&amp;gt;  
&amp;lt;/target&amp;gt;

&amp;lt;target name=&amp;#34;war&amp;#34; depends=&amp;#34;compile&amp;#34;&amp;gt;  
&amp;lt;jar jarfile=&amp;#34;${target.path}/${project.name}-${profile}${now}.war&amp;#34;&amp;gt;  
&amp;lt;fileset dir=&amp;#34;${target.root.path}&amp;#34;&amp;gt;  
&amp;lt;include name=&amp;#34;*\*/\*&amp;#34; /&amp;gt;  
&amp;lt;exclude name=&amp;#34;*\*/\*.fla&amp;#34; /&amp;gt;  
&amp;lt;exclude name=&amp;#34;*\*/\*.mp3&amp;#34; /&amp;gt;  
&amp;lt;exclude name=&amp;#34;*\*/\*.as&amp;#34; /&amp;gt;  
&amp;lt;exclude name=&amp;#34;*\*/\*.bak&amp;#34; /&amp;gt;  
&amp;lt;exclude name=&amp;#34;*\*/\*.swd&amp;#34; /&amp;gt;  
&amp;lt;exclude name=&amp;#34;*\*/\*.db&amp;#34; /&amp;gt;  
&amp;lt;/fileset&amp;gt;  
&amp;lt;/jar&amp;gt;  
&amp;lt;/target&amp;gt;  
&amp;lt;target name=&amp;#34;deploy&amp;#34; depends=&amp;#34;compile&amp;#34;&amp;gt;  
&amp;lt;delete dir=&amp;#34;${deploy.dir}&amp;#34; /&amp;gt;  
&amp;lt;mkdir dir=&amp;#34;${deploy.dir}&amp;#34; /&amp;gt;  
&amp;lt;copy todir=&amp;#34;${deploy.dir}&amp;#34;&amp;gt;  
&amp;lt;fileset dir=&amp;#34;${target.root.path}&amp;#34;&amp;gt;  
&amp;lt;/fileset&amp;gt;  
&amp;lt;/copy&amp;gt;  
&amp;lt;echo&amp;gt;deploy ${target.root.path} to ${deploy.dir}&amp;lt;/echo&amp;gt;  
&amp;lt;/target&amp;gt;  
&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
  </channel>
</rss>
