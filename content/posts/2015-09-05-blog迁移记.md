---
title: Blog迁移记
author: Bridge Li
type: post
date: 2015-09-05T14:54:58+00:00

duoshuo_thread_id:
  - 1.1604454626757E+18
categories:
  - Java
tags:
  - LAMP
---
以前老夫的Blog是在西部数码买的空间，转眼一眼就到期了，幸好一朋友免费赞助的一空间，然后就把自己的Blog迁移过去了，下面就总结一下自己的迁移经验，以供需要的朋友或者自己将来再次迁移只用，先说明，老夫用的是典型的LAMP环境，另外Linux环境的Ubuntu。

LAMP环境，Linux最好弄了，你买空间的时候，选择Linux，并选择发行版本就完了，下面开始从A说起

一. A（Apache）

1.安装apache2

安装命令：

```

sudo apt-get install apache2

```

启动/停止/重启apache2: 

```

service apache2 start/stop/restart

```

2. 卸载apache2

之前卸载重新安装后找不到apache2.conf配置文件，测试使用以下方式卸载后可用。

(1) 

```

sudo apt-get &#8211;purge remove apache2  
sudo apt-get &#8211;purge remove apache2.2-common  
sudo apt-get autoremove

```

(2) （关键一步）找到没有删除掉的配置文件，一并删除

```

sudo find /etc -name "\*apache\*" -exec rm -rf {} ;  
sudo rm -rf /var/www

```

二、M（MySQL）

1. 安装MySQL  
```

sudo apt-get install mysql-server

```

2. 修改MySQL的默认字符集

登陆进去之后查看字符集：

```

show variables like &#8216;%character%&#8217;;

```

默认字符集不是UTF-8，不符合我们的要求。则需要修改。修改过程如下：  
使用如下命令，打开MySQL的配置文件：

```

vim /etc/mysql/my.cnf

```

在[client]下添加如下一行代码：

```

[client]  
default-character-set=utf8

```

在[mysqld]下添加如下两行代码：

```

[mysqld]  
character-set-server = utf8  
init_connect=&#8217;SET NAMES utf8&#8242;

```

保存后退出，然后重启MySQL：

```

sudo service mysql restart

```

多说一点，如果远程连接没权限的话，可以这么做：  
例如：myuser使用mypassword从任何主机连接到mysql服务器

```

GRANT ALL PRIVILEGES ON \*.\* TO &#8216;myuser&#8217;@&#8217;%&#8217; IDENTIFIED BY &#8216;mypassword&#8217; WITH GRANT OPTION;  
FLUSH PRIVILEGES;

```

三、P（PHP）

安装PHP

```

sudo apt-get install php5 //安装PHP5 

```

四、LAMP

1. 并让Apache支持PHP

```

sudo apt-get install libapache2-mod-php5 //配置APACHE+PHP  
sudo /etc/init.d/apache2 restart //重启APACHE

```

2. 让Apache、PHP支持MySQL

```

sudo apt-get install libapache2-mod-auth-mysql  
sudo apt-get install php5-mysql  
sudo /etc/init.d/apache2 restart

```

五、最后一步就是安装WordPress

1. 下载WordPress

```

wget http://cn.wordpress.org/wordpress-3.9-zh_CN.zip

```

然后把下载的文件copy到Apache的www目录下，安装unzip，解压并创建数据库，最后浏览器访问：

```

http://<服务器IP或者域名>/wordpress/

```

根据步骤一步一步完成安装，如果提示没有权限创建wp-config.php。所以，手动在wordpress目录下创建wp-config.php文件，并把屏幕提示的内容，拷贝到这个文件中，保存并退出。继续进行安装即可。

其实到此处，LAMP的搭建已经完成，需要强调的是，这里没有采用Nginx进行代理，直接用的Apache，因为老夫的Blog的访问量实在是太低了，所以无所谓，实际上对于访问量大的，大家可以自己进行Nginx的配置，最后的最后老夫当时也是这么搞的，当时想把自己以前的数据库数据搞过来，导进去不就行了吗，但事实上并没有那么简单，不用所料的失败了，查原因，是因为老夫的Blog安装了一些插件，这些插件和.htaccess相互影响，导致访问不了，这个就需要具体情况具体分析了，老夫不在赘述。